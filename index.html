<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ta≈üƒ±nIRmaz - ƒ∞lan</title>
  <style>
    :root{
      --dark:#1a1a1a;
      --muted:#eaeaea;
      --accent:#FF7A00;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, Arial, Helvetica, sans-serif;
      background:#f5f5f5;
      color:#222;
      height:100vh;
      display:flex;
      flex-direction:column;
    }

    header{
      background:var(--dark);
      color:#fff;
      padding:14px 18px;
      font-size:18px;
      flex-shrink:0;
    }

    /* nav */
    .tabs{
      display:flex;
      gap:0;
      background:var(--muted);
      border-bottom:1px solid #dcdcdc;
      flex-shrink:0;
      overflow:auto;
    }
    .tabs button{
      flex:1 0 auto;
      padding:12px 14px;
      border:0;
      background:transparent;
      font-size:15px;
      cursor:pointer;
    }
    .tabs button.active{
      background:#fff;
      border-bottom:3px solid var(--dark);
      font-weight:600;
    }

    /* main stage */
    .stage{
      flex:1;
      min-height:0; /* allow inner scroll */
      position:relative;
      display:flex;
      flex-direction:column;
    }

    .panel{
      display:none;
      height:100%;
    }
    .panel.active{ display:block; }

    iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
    }

    /* info panel */
    .info {
      padding:20px;
      background:#fff;
      height:100%;
      overflow:auto;
    }
    .info h2{margin-top:0}

    /* gallery */
    .gallery-wrap{
      height:100%;
      overflow:auto;
      padding:12px;
      background:#fff;
    }
    .gallery-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill, minmax(150px, 1fr));
      gap:10px;
    }
    .gallery-grid img{
      width:100%;
      height:110px;
      object-fit:cover;
      border-radius:8px;
      cursor:pointer;
      box-shadow:0 2px 6px rgba(0,0,0,0.08);
      transition:transform .15s;
    }
    .gallery-grid img:hover{ transform:scale(1.03); }

    /* lightbox (overlay) */
    .lightbox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.92);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }
    .lightbox img{
      max-width:92%;
      max-height:92%;
      border-radius:8px;
      box-shadow:0 10px 40px rgba(0,0,0,0.6);
    }
    .lightbox .nav-left,
    .lightbox .nav-right{
      position:absolute;
      top:0;
      height:100%;
      width:30%;
      cursor:pointer;
    }
    .lightbox .nav-left{ left:0; }
    .lightbox .nav-right{ right:0; }

    .lightbox .close-btn{
      position:absolute;
      top:18px;
      right:24px;
      color:white;
      font-size:30px;
      cursor:pointer;
      z-index:10000;
    }

    .lightbox .counter{
      position:absolute;
      bottom:20px;
      left:50%;
      transform:translateX(-50%);
      color:#fff;
      font-size:14px;
      background:rgba(0,0,0,0.45);
      padding:6px 10px;
      border-radius:20px;
    }

    /* whatsapp */
    .whatsapp{
      position:fixed;
      right:18px;
      bottom:18px;
      z-index:10001;
      background:#25D366;
      color:white;
      padding:12px 16px;
      border-radius:50px;
      text-decoration:none;
      font-weight:600;
      box-shadow:0 6px 18px rgba(0,0,0,0.18);
    }

    /* responsive small */
    @media (max-width:700px){
      .gallery-grid img{ height:90px; }
      .tabs button{ font-size:14px; padding:10px; }
    }
  </style>
</head>
<body>

<header>üè† ta≈üƒ±nIRmaz ‚Äì ƒ∞lan</header>

<nav class="tabs" role="tablist" aria-label="ƒ∞√ßerik sekmeleri">
  <button data-target="home" class="active" aria-pressed="true">Ana Sayfa</button>
  <button data-target="planner">Plan (2D / 3D)</button>
  <button data-target="tour">360 Sanal Tur</button>
  <button data-target="info">Bilgiler</button>
  <button data-target="gallery">Fotoƒüraf Galerisi</button>
</nav>

<main class="stage">
  <!-- HOME -->
  <section id="home" class="panel active" role="region" aria-label="Ana Sayfa">
    <div style="padding:20px;">
      <h2>ta≈üƒ±nIRmaz</h2>
      <p>Balƒ±kesir ve il√ßelerinde daire & i≈üyeri i√ßin profesyonel 360¬∞ sanal tur ve plan entegrasyonu.</p>
      <p>Projeyi g√∂r√ºnt√ºlemek i√ßin √ºst sekmelerden birini se√ßin.</p>
    </div>
  </section>

  <!-- PLANNER (Planner5D embed) -->
  <section id="planner" class="panel" role="region" aria-label="Plan 3D">
    <!-- Replace key if needed -->
    <iframe src="https://planner5d.com/view?key=37ed73ce9dc1571cf583cd6be3adbd5e" title="3D Plan (Planner5D)"></iframe>
  </section>

  <!-- 360 TOUR -->
  <section id="tour" class="panel" role="region" aria-label="360 Sanal Tur">
    <!-- Make sure your marzipano export's index.html is at /tour/index.html -->
    <iframe src="tour/index.html" title="360 Tur"></iframe>
  </section>

  <!-- INFO -->
  <section id="info" class="panel" role="region" aria-label="Bilgiler">
    <div class="info">
      <h2>Gayrimenkul Bilgileri</h2>
      <p><strong>ƒ∞lan Sahibi:</strong> ta≈üƒ±nIRmaz</p>
      <p><strong>Konum:</strong> Balƒ±kesir / Pa≈üaalanƒ±</p>
      <p><strong>Oda Sayƒ±sƒ±:</strong> 3+1</p>
      <p><strong>Metrekare:</strong> 120 m¬≤</p>
      <p><strong>Kat:</strong> 2</p>


      <h3>ƒ∞leti≈üim</h3>
      <p>üìû 0501 262 43 26</p>
      <p>‚úâÔ∏è keskinrecep26@gmail.com</p>
      <p>Instagram: @tasinirmaz (yakƒ±nda)</p>
    </div>
  </section>

  <!-- GALLERY -->
  <section id="gallery" class="panel" role="region" aria-label="Fotoƒüraf Galerisi">
    <div class="gallery-wrap">
      <div class="gallery-grid" id="galleryGrid" aria-live="polite">
        <!-- images loaded by JS -->
      </div>
    </div>
  </section>
</main>

<!-- LIGHTBOX overlay -->
<div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-hidden="true">
  <span class="close-btn" id="lbClose" aria-label="Kapat">‚úï</span>
  <div class="nav-left" id="lbPrev" aria-hidden="false"></div>
  <img id="lbImg" src="" alt="B√ºy√ºt√ºlm√º≈ü fotoƒüraf">
  <div class="nav-right" id="lbNext" aria-hidden="false"></div>
  <div class="counter" id="lbCounter">0 / 0</div>
</div>

<!-- WhatsApp -->
<a class="whatsapp" href="https://wa.me/905012624326" target="_blank" rel="noopener">üí¨ WhatsApp</a>

<script>
/* ---------- TAB LOGIC (stable) ---------- */
const tabs = document.querySelectorAll('.tabs button');
const panels = document.querySelectorAll('.panel');

tabs.forEach(btn=>{
  btn.addEventListener('click', e=>{
    const target = btn.getAttribute('data-target');
    // deactivate all
    tabs.forEach(b=>{ b.classList.remove('active'); b.setAttribute('aria-pressed','false'); });
    panels.forEach(p=>p.classList.remove('active'));
    // activate clicked
    btn.classList.add('active');
    btn.setAttribute('aria-pressed','true');
    document.getElementById(target).classList.add('active');
  });
});

/* ---------- GALLERY: auto-detect photos in /photos/ ---------- */
const galleryGrid = document.getElementById('galleryGrid');
let photos = []; // array of URLs
const MAX_PHOTOS = 300; // try up to this many (safe upper bound)

async function tryFetch(url){
  try{
    const r = await fetch(url, {method:'HEAD'}); // HEAD is enough to check existence
    return r.ok;
  }catch(e){ return false; }
}

async function loadGallery(){
  // Try numeric filenames 1..MAX_PHOTOS with common extensions
  const exts = ['jpg','jpeg','png','webp'];
  for(let i=1;i<=MAX_PHOTOS;i++){
    let found = false;
    for(const ext of exts){
      const url = `photos/${i}.${ext}`;
      // Use HEAD to avoid downloading full file for check (some hosts may not allow HEAD; fallback to GET)
      const ok = await tryFetch(url);
      if(ok){
        photos.push(url);
        found = true;
        break;
      }
    }
    // small optimization: if no file for many consecutive indices, you might break early
    // but we'll scan full range to be robust
  }
  renderGallery();
}

function renderGallery(){
  galleryGrid.innerHTML = '';
  if(photos.length===0){
    galleryGrid.innerHTML = '<p style="padding:10px;color:#666">Hen√ºz fotoƒüraf yok. photos klas√∂r√ºne 1.jpg, 2.jpg ... ≈üeklinde ekleyin.</p>';
    return;
  }
  photos.forEach((src, idx)=>{
    const img = document.createElement('img');
    img.src = src;
    img.alt = `Fotoƒüraf ${idx+1}`;
    img.loading = 'lazy';
    img.addEventListener('click', ()=> openLightbox(idx));
    galleryGrid.appendChild(img);
  });
}

/* --- LIGHTBOX with nav & keyboard --- */
const lightbox = document.getElementById('lightbox');
const lbImg = document.getElementById('lbImg');
const lbCounter = document.getElementById('lbCounter');
let currentIndex = 0;

function openLightbox(index){
  if(photos.length===0) return;
  currentIndex = index;
  lbImg.src = photos[currentIndex];
  lbCounter.textContent = `${currentIndex+1} / ${photos.length}`;
  lightbox.style.display = 'flex';
  lightbox.setAttribute('aria-hidden','false');
  // prevent background scroll
  document.body.style.overflow = 'hidden';
}

function closeLightbox(){
  lightbox.style.display = 'none';
  lightbox.setAttribute('aria-hidden','true');
  lbImg.src = '';
  document.body.style.overflow = '';
}

function nextPhoto(){
  if(photos.length===0) return;
  currentIndex = (currentIndex+1) % photos.length;
  lbImg.src = photos[currentIndex];
  lbCounter.textContent = `${currentIndex+1} / ${photos.length}`;
}

function prevPhoto(){
  if(photos.length===0) return;
  currentIndex = (currentIndex-1 + photos.length) % photos.length;
  lbImg.src = photos[currentIndex];
  lbCounter.textContent = `${currentIndex+1} / ${photos.length}`;
}

/* click zones */
document.getElementById('lbNext').addEventListener('click', (e)=>{ e.stopPropagation(); nextPhoto(); });
document.getElementById('lbPrev').addEventListener('click', (e)=>{ e.stopPropagation(); prevPhoto(); });
document.getElementById('lbClose').addEventListener('click', (e)=>{ e.stopPropagation(); closeLightbox(); });

/* click outside image closes (but clicking left/right handled above) */
lightbox.addEventListener('click', (e)=>{
  // if clicked directly on image, ignore
  if(e.target === lbImg) return;
  closeLightbox();
});

/* keyboard support */
document.addEventListener('keydown', (e)=>{
  if(lightbox.style.display === 'flex'){
    if(e.key === 'ArrowRight') nextPhoto();
    if(e.key === 'ArrowLeft') prevPhoto();
    if(e.key === 'Escape') closeLightbox();
  }
});

/* initial load */
loadGallery();

/* Accessibility: announce when gallery loads (optional) */
// you can focus first image programmatically if needed

</script>
</body>
</html>
